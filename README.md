
# 3D Printed Full-Size Polyphonic Musical Keyboard

## Features
  * Full-size keyboard
  * 8-way polyphony
  * 4 instruments
  * Range C0 through B7 (96 notes)

## Directories
  * src - Source code for the microcontroller (an AVR ATtiny85)
  * pcb/sensor - PCB for the sensor board
  * pcb/controller PCB for the controller board
  * scad - OpenSCAD design

## Function Keys

  * Instruments
    * C0  - Triangle wave
    * D0  - Sine wave
    * E0  - Square wave
    * F0  - Sawtooth wave
  * Octave
    * C#0 - Shift down an octave
    * D#0 - Shift up an octave
  * Tuning (saved in EEPROM)
    * F#0 - Flatten
    * G#0 - Reset
    * A#0 - Sharpen

## 3D Printed Parts

  * Keybed
  * White keys (7)
  * Black keys (5)
  * Assembly tool (to help attach the rubber bands)

## BOM

  * Controller PCB
    * 1x ATtiny85 (or ATtiny45)
    * 1x USB-B socket
    * 1x 2x3 IDC socket
    * 1x 3.5mm audio jack
    * 1x 3mm LED
    * 1x 6mm SPST tactile switch
    * 1x 10k POT
    * 2x 1k reistor
    * 2x 0.1u capacitor
    * 2x 10u capacitor

  * Sensor PCB (1 per octave)
    * 12x 12.6x6.5x5.7mm SPDT limit switch
    * 2x 10k resistor
    * 2x 74HC165
    * 2x 0.1uF capacitor
    * 1x 6-pin right-angle socket
    * 1x 6-pin right-angle pin header

  * Other
    * 12x small rubber bands (per octave)
    * USB cord and power supply


## Waves

Waveforms are generated by sampling a 256 point sine wave.
The base waveform is at half the frequency (16') of the target (8').
This allows us to generate the necessary harmonics.

Harmonic format:
  * 8':  xx 1234 568
  * 16': 13 2468 xxx
  * 4':  xx x1x2 x34
  * 2':  xx xxx1 xx2
  * 1':  xx xxxx xx1
  
  * Flute
    * 1st harmonic only:
      * Flute 16' - 80 0000 000
      * Flute 8'  - 00 8000 000
      * Flute 4'  - 00 0800 000

  * Reed
    * Odd harmonics, decay 1/n - 8 0 3 0 2
      * Reed 16'  - 83 0000 000
      * Reed 8'   - 00 8030 200
      * Reed 4'   - 00 0800 030

  * String
    * All harmonics, decay 1/n - 6 3 1
      * String 16'  - 61 3000 000
      * String 8'   - 00 6310 000
      * String 4'   - 00 0603 010

  * Diapason
    * All harmonics
      * Diapason 16'  - 80 2100 000
      * Diapason 8'   - 00 8201 000
      * Diapason 4'   - 00 0802 001

